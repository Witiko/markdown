\documentclass{book}
\usepackage{polyglossia}
% work around a bug in polyglossia
\makeatletter
\ExplSyntaxOn
\pretocmd\xpg@set@alias@values{%
	\prop_if_exist:cF { xpg@alias@keyvals@#1@#4 }
	{ \prop_new:c {xpg@alias@keyvals@#1@#4} }
}{}{}
\ExplSyntaxOff
\makeatother
% end of workaround
\setmainlanguage{english}
\usepackage{fontspec}
\usepackage{booktabs}
% Load the Markdown package and set its options.
\usepackage[
  contentBlocks,
  debugExtensions,
  definitionLists,
  fancy_lists,
  fencedCode,
  hashEnumerators,
  inlineNotes,
  jekyllData,
  lineBlocks,
  notes,
  pipeTables,
  rawAttribute,
  smartEllipses,
  strikeThrough,
  subscripts,
  superscripts,
  tableCaptions,
  taskLists,
  texMathDollars,
  texMathDoubleBackslash,
  texMathSingleBackslash,
]{markdown}
% Set the document metadata using a YAML metadata block.
\begin{markdown}[hybrid]
---
title:  An Example *Markdown* Document
author: Vít Starý Novotný
date:   \today
---
\end{markdown}
\begin{document}
% Typeset the document `example.md` by letting the Markdown package handle
% the conversion internally.
\markdownInput{./example.md}

% Typeset the document `example.tex` that we prepared separately using the
% Lua command-line interface of the Markdown package and that contains a
% plain TeX representation of the document `example.md`.
\catcode`\%=12\relax
\catcode`\#=12\relax
\InputIfFileExists{./example.tex}{}{}
\catcode`\%=14\relax
\catcode`\#=6\relax

% Typeset some further examples with inline markdown text.
\begin{markdown}
Here are some non-ASCII characters: *ěščřžýáíé*.
\end{markdown}
\end{document}
